<div>
    <mat-card style="margin-top: 10px; margin-left: 10px;">
        <mat-card-title style="margin-bottom: 20px;">
            Request
        </mat-card-title>
        <mat-card-content>
            <div fxLayout="row wrap" fxLayout.lt-sm="column" fxLayoutAlign="space-around center" fxLayoutGap="32px"
                fxLayoutAlign="flex-start">
                <mat-form-field appearance="fill">
                    <mat-label>Status</mat-label>
                    <mat-select (selectionChange)="applyFilterStatus($event.value)" [(ngModel)]="statusFilter">
                        <mat-option value="">None</mat-option>
                        <mat-option *ngFor="let status of requestStatusValuesKeys()" [value]="status">
                            {{status}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field>
                    <input matInput (keyup)="applyFilterClass($event.target.value)" placeholder="Filter"
                        [(ngModel)]="classFilter">
                </mat-form-field>
                <mat-form-field>
                    <input matInput (keyup)="applyFilterCode($event.target.value)" placeholder="Request code"
                        [(ngModel)]="lastFieldFilter">
                </mat-form-field>
                <mat-form-field>
                    <input matInput (keyup)="applyFilterCreator($event.target.value)" placeholder="Creator"
                        [(ngModel)]="creatorFilter">
                </mat-form-field>
                <!-- <mat-form-field> -->
                <!-- </mat-form-field> -->
            </div>
            <mat-checkbox (change)="getAllCheckBoxChange()" matInput [(ngModel)]="showAll">Show all
                <span class="material-icons"
                    matTooltip="Hide rejected/completed/created/cancelled/created as draft requests">
                    help
                </span>
            </mat-checkbox>
            <table mat-table [dataSource]="dataSource" style="width: 100%;" matSort matSortActive="creationDate"
                matSortDirection="desc">
                <ng-container matColumnDef="code">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Code </th>
                    <td mat-cell *matCellDef="let entry"> {{entry.lastField}} </td>
                </ng-container>
                <ng-container matColumnDef="type">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Application </th>
                    <td mat-cell *matCellDef="let entry" [matTooltip]="entry.type">
                        {{ (entry.type.length>50)? (entry.type | slice:0:50)+'...':(entry.type) }} </td>
                    <!--Very proud of this KEKW-->
                </ng-container>
                <ng-container matColumnDef="creatorName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Creator </th>
                    <td mat-cell *matCellDef="let entry" [innerHTML] = "entry.creatorName"> </td> <!--Because agendo returns the accetns encoded-->
                </ng-container>
                <ng-container matColumnDef="creationDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Date created </th>
                    <td mat-cell *matCellDef="let entry"> {{entry.creationDate}} </td>
                </ng-container>
                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
                    <td mat-cell *matCellDef="let entry"> {{entry.status}} </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                <tr mat-row (click)="goTo(myRowData)" *matRowDef="let myRowData; columns: columnsToDisplay"></tr>
            </table>
            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        </mat-card-content>
    </mat-card>
</div>
